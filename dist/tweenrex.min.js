!function(){"use strict"
function t(t,e){t.push.apply(t,e)}function e(t,e){for(var i=0;i<e.length;i++){var n=t.indexOf(e[i]);-1!==n&&t.splice(n,1)}}function i(t){return Array.isArray(t)?t:[t]}function n(n){var s,r,a=!1!==(n=n||{}).distinct,o=n.onNext||h,u=n.onDispose||h,c=n.onSubscribe||h,l=n.onUnsubscribe||h,p=i(n.subscribe||[])
return{value:function(){return s},dispose:function(){p.length=0,u()},next:function(t){if(r||(r=[]),r.push(t),1>=r.length){for(var e=0;e<r.length;e++){var i=p.slice()
if(t=r[e],!a||t!==s){s=t
for(var n=0;n<i.length;n++)i[n](t)}}r.length=0,o(t,p)}},subscribe:function(n){return n=i(n),c(p),t(p,n),function(){e(p,n),l(p)}}}}function s(t,e){return t instanceof e?t:Object.create(e.prototype)}function r(t){return"string"==typeof t}function a(t,e,i){return f(b(e,t),i)}function o(t){var e=s(this,o)
e._opts=t,e.target=function(t){return r(t.tagName)?t:document.querySelector(t)}(t.targets),e._timer=t.timer||l,e.startAt=t.startAt,e.endAt=t.endAt,e.easing=t.easing,e.direction=t.direction,e._tick=function(){var t,i,n,s=e.target
"x"===e.direction?(t=s.scrollLeft,i=e.startAt||0,n=e.endAt?e.endAt:s.scrollWidth-s.clientWidth):(t=s.scrollTop,i=e.startAt||0,n=e.endAt?e.endAt:s.scrollHeight-s.clientHeight)
var r=a(n&&isFinite(n)?(t-i)/(n-i):0,0,1)
e.easing?"ASYNC"===e.easing.tr_type?e.easing(r,e.next):e.next(e.easing(r)):e.next(r)}
var i=n(t)
return e.next=i.next,e.value=i.value,e.subscribe=i.subscribe,e.dispose=function(){e.pause(),e.target=_,i.dispose()},e}function u(t){var e=t||{},i=s(this,u)
i._opts=e,i._timer=e.timer||l,i._pos=e.duration||0,i._time=0,i.labels=e.labels||{},i.easing=e.easing,i.playbackRate=1,i._tick=function(t){var n=e.frameSize||(t-(i._last||t))*i.playbackRate,s=i._time+n
i._last=t,i.seek(s)}
var r=n(e)
return i.dispose=function(){i.pause(),i._pos=0,i._time=0,i.playbackRate=1,i._tweens=_,i.labels={},r.dispose()},i.next=r.next,i.value=r.value,i.subscribe=r.subscribe,i}var h=function(){},_=void 0,c="undefined"!=typeof requestAnimationFrame?requestAnimationFrame.bind(window):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},l=n({onSubscribe:function(t){t.length||c(l.next)},onNext:function(t,e){e.length&&c(l.next)}}),p=Math,f=p.min,b=p.max
o.prototype={get isPlaying(){return!!this._sub},play:function(){this.isPlaying||(this._tick(),this._sub=this._timer.subscribe(this._tick),this._opts.onPlay&&this._opts.onPlay())},pause:function(){this.isPlaying&&(this._sub(),this._sub=_,this._opts.onPause&&this._opts.onPause())}},u.prototype={get duration(){var t=this._tweens,e=this._pos
if(t)for(var i=0,n=t.length;n>i;i++){var s=t[i],r=s.pos+s.tween.duration
r>e&&(e=r)}return e},set duration(t){this._pos=t},get currentTime(){return this._time},set currentTime(t){this.seek(t)},get isPlaying(){return!!this._sub},add:function(n,s){this._tweens||(this._tweens=[]),n=i(n)
for(var a=this._tweens,o=function(t,e){return t===_?e:t}(r((s=s||{}).position)?this.labels[s.position]:s.position,this.duration),h=s.sequence,c=s.stagger,l=n.length,p=Array(l),f=0;l>f;f++){var b=function(t){return t instanceof u?t:u(t)}(n[f])
b.isPlaying&&b.pause(),b._timer=_,p[f]={pos:o,tween:b},h&&(o+=b.duration),c&&(o+=c)}return t(a,p),function(){e(a,p)}},play:function(){var t=this._timer
if(t&&!this.isPlaying){var e=this.playbackRate>=0,i=this.duration,n=this._time
e&&n>=i?n=0:e||n>0||(n=i),this.seek(n),this._sub=t.subscribe(this._tick),this._opts.onPlay&&this._opts.onPlay()}return this},restart:function(){return this.pause().seek(0>this.playbackRate?this.duration:0).play()},pause:function(){var t=this._sub
return t&&(t(),this._sub=this._last=_,this._opts.onPause&&this._opts.onPause()),this},reverse:function(){return this.playbackRate*=-1,this},seek:function(t){var e,i=this.playbackRate>=0,n=this.isPlaying,s=this.duration,o=r(t)?this.labels[t]:t
i&&o>=s?(o=s,this.pause(),e=!0):i||o>0||(o=0,this.pause(),e=!0),this._time=o
var u=o/(s||1)
this.easing&&(u=this.easing(u)),e&&n&&this._opts.onFinish&&this._opts.onFinish()
var h=o<this.value()
this.next(u)
var c=this._tweens
if(c){var l=s-o
c.sort(function(t,e){return(l+t.pos)%s-(l+e.pos)%s}),h&&c.reverse()
for(var p=0,f=c.length;f>p;p++){var b=c[p],g=b.tween,v=b.pos,d=a((o-v)/(v+(g.duration||1)-v),0,1)
g.next(d)}}return this},getLabel:function(t){return this.labels[t]},setLabel:function(t,e){return this.labels[t]=e,this}}
var g=window
g.TRexObservable=n,g.TyrannoScrollus=o,g.TweenRex=u}()
